

find_package(Qt5 REQUIRED Widgets)
include_directories(${Qt5Widgets_INCLUDE_DIRS})

find_package(PythonLibs 2.7 REQUIRED)
find_package(Qt5Python27 REQUIRED)


include_directories(${CMAKE_CURRENT_BINARY_DIR})
include_directories(${PYTHON_INCLUDE_DIRS})

set(PYTHONQT_LIBRARIES Qt5Python27 Qt5Python27_QtAll)

set(srcs
  ctkConsole.cpp
  ctkPythonConsole.cpp
  ctkAbstractPythonManager.cpp
)

qt5_wrap_cpp(moc_srcs
  ctkConsole.h
  ctkConsole_p.h
  ctkPythonConsole.h
  ctkAbstractPythonManager.h
  )

add_library(ctkPythonConsole ${srcs} ${moc_srcs})
target_link_libraries(ctkPythonConsole ${Qt5Widgets_LIBRARIES} ${PYTHON_LIBRARIES} ${PYTHONQT_LIBRARIES})
set_target_properties(ctkPythonConsole PROPERTIES SOVERSION 1.0 VERSION 1.0)
set_target_properties(ctkPythonConsole  PROPERTIES INSTALL_NAME_DIR "${CMAKE_INSTALL_PREFIX}/lib")

add_executable(console main.cpp)
target_link_libraries(console ctkPythonConsole)

install(FILES
  ctkAbstractPythonManager.h
  ctkConsole.h
  ctkPythonConsole.h
  ctkPythonConsoleExport.h
  DESTINATION include/ctkPythonConsole)

install(TARGETS ctkPythonConsole
        RUNTIME DESTINATION bin
        LIBRARY DESTINATION lib
        ARCHIVE DESTINATION lib)
